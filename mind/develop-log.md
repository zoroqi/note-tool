# 2019-07-21

* 需求

1. 将固定格式的md转换成mm文件, 提供互相转换
2. 保持格式美观, 要保证节点不能只在一侧

* 设计方案

1. [.mm](http://freemind.sourceforge.net/wiki/index.php/File_format)文件格式描述
2. md文件格式
    ```
    * 中心主题
        * 分支主题1
            * 子主题1
                * 子主题1
                * 子主题2
                    1. 笔记说明
                    2. 其它描述类信息
                    3. 这部分不展示
            * 子主题2 
            * [子主题3](http://)
            * [子主题4](分支主题3)
            * [子主题5](test.mm)
        * 分支主题2
        * 分支主题3
    ```
3. md和mm之间的转换会丢失格式, 对mm中的格式数据可以不进行转换
4. 左右分割原则, 只有一级需要进行左右分割, 二级之后是不需要的. 
    * 方案一: 根据一级标签数量简单平均分割
    * 方案二: 根据二级标签数量进行平均分割
    * 方案三: 根据所有子节点的总和进行分割
5. 方案选择, 暂定二, 实现相对简单. 看情况可以支持多级也可以

# 2019-07-22

* 问题

1. 官方文档没有最新的描述
2. 内部超链暂时不知道如何用md进行表达, 我使用的是\*进行分割, 这个没有锚点
3. 如何进行内部锚点描述, 这个最开始没有想到...
4. etree 这个工具包进行序列化html的时候没法做格式化, 只保留一行, 这导致文件异常难看. 

* 设计方案

1. 选择只使用mapper/note/richcontent(内部是html)/linktarget(节点之间的连线)/arrowlink(节点之间的连线) 其他标签暂时无法使用
2. 选用x/net中的html进行解析, 看情况可能选择etree这个要再看
3. 针对锚点暂时采用全匹配进行锚点
4. 针对etree部分的处理, 尝试看看 encode/xml. 不行使用自己的见一个分支专门处理这个换行

# 2019-07-23

* 需求
1. 我需要为自己的文档做一个特别版本, 我文档格式决定是. 上半部分为记录, 下半部分为思维导图的md, 需要做特殊解析

* 设计方案

1. 发现etree输出格式化,需要手动指定, indent. 这个隐藏的有点深. 实现方式是插入一个CharData结构, 来实现的. 
2. 针对我自己的文档进行转换, 提供一个特殊的分支, 输入格式为
```markdown
...一些内容
### 思维导图
...

> 脑图概述

* 主题
    * 主题2
    * 主题3

file end/### 其他内容

```
    

# 2019年08月11日

* 问题
1. 之前设计时对id的设计考虑不全, 导致在树中间插入节点会导致大面积的id变动. 这个在git这种版本管理上会出现比较严重的问题, 它会产生大面积的行变化导致后期查看不方便

* 修改
1. 改为多级目录, 采用一下方式.暂不采用程序员的0开始, 以1开始.
```
1. xxx
1.1 xxx
1.2 xxx
1.2.1 xxx
2.1 xxx
```

# 2019年08月13日

* 问题
1. 针对11号的问题, 已经修改, 但是新的问题又产生了, 在多个主题下这个如何记录, 会出现标题重复. 
2. 我打算做一个庞大的图, 这个会产生大量的链接和内部链接. 这将比较麻烦
3. 发现xmind不支持跨主题的链接. 并且无法展示
4. 我无法靠多个mindmapper拼接成一个大图, 在一个界面展示. 这个比较头痛

* 方案
1. id修改为 主题.x.x 格式
2. 拼接可能需要自己实现了合并了. 这个比较麻烦.
    1. 手动合并所有的xml为一个大的xml





